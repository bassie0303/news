# ログイン管理ガイド

## 🔐 ログインの仕組み

この拡張機能は、各SNS（Facebook、Threads、X）のログイン状態を管理し、2回目以降は自動的にログイン済みの状態でアクセスできるようにします。

## 📋 初回利用時の流れ

### ステップ1: 初回投稿ボタンをクリック

各SNSのボタンを初めてクリックすると：

1. **ログインページが開きます**
   - Facebook: https://www.facebook.com/login
   - Threads: https://www.threads.net/login
   - X: https://twitter.com/i/flow/login

2. **投稿内容はクリップボードにコピーされます**
   - ログイン後に貼り付けられるように準備されます

3. **ログインしてください**
   - 各SNSの認証情報を入力
   - ログインを完了

### ステップ2: ログイン完了の確認

ログインが完了すると、5秒後に確認ダイアログが表示されます：

```
[SNS名]にログインしましたか？

ログインが完了したら「OK」を押してください。
投稿内容はクリップボードにコピーされています。
```

**「OK」をクリック** すると、ログイン状態が保存されます。

### ステップ3: もう一度投稿ボタンをクリック

ログイン状態が保存されたら、もう一度同じSNSのボタンをクリックしてください。

今度は **ログインページではなく、投稿画面が直接開きます**。

## 🔄 2回目以降の利用

### 自動的にログイン状態を維持

一度ログインすると、拡張機能は以下の情報を記憶します：

- ✅ Facebook: ログイン済み
- ✅ Threads: ログイン済み
- ✅ X: ログイン済み

2回目以降は、ボタンをクリックすると **直接投稿画面が開きます**。

### Cookieによる認証

ChromeブラウザのCookie機能により、各SNSのログイン状態が保持されます：

- ブラウザを閉じても、Cookieが有効な限りログイン状態は維持されます
- SNS側でログアウトしない限り、再ログインは不要です

## 🚀 一括投稿の場合

「🚀 すべてに一括投稿」ボタンを使用する場合：

### 初回利用時

1. **一括投稿ボタンをクリック**
2. **エラーメッセージが表示されます**
   ```
   以下のSNSにログインが必要です: Facebook, Threads, X。
   各SNSのボタンを個別にクリックしてログインしてください。
   ```

3. **各SNSに個別にログイン**
   - 「Facebookに投稿」をクリック → ログイン
   - 「Threadsに投稿」をクリック → ログイン
   - 「Xに投稿」をクリック → ログイン

4. **すべてログイン完了後**
   - もう一度「🚀 すべてに一括投稿」をクリック
   - 3つのSNSの投稿画面が同時に開きます

### 2回目以降

すべてのSNSにログイン済みの場合：

1. **「🚀 すべてに一括投稿」をクリック**
2. **3つのタブが同時に開きます**
   - Facebook投稿画面
   - Threads投稿画面
   - X投稿画面

3. **各タブで投稿を確認して投稿ボタンをクリック**

## 🔧 ログイン状態のリセット

### リセットが必要な場合

以下の場合は、ログイン状態をリセットする必要があります：

- ❌ SNS側でログアウトした場合
- ❌ アカウントを変更したい場合
- ❌ ログインに問題がある場合
- ❌ 別のアカウントで投稿したい場合

### リセット方法

1. **拡張機能のポップアップを開く**
2. **「🔄 ログイン状態をリセット」ボタンをクリック**
3. **「ログイン状態をリセットしました」と表示されます**
4. **各SNSのボタンをクリックして再度ログイン**

## 💡 ヒントとコツ

### 複数アカウントの使用

Chrome拡張機能は、Chromeブラウザのログイン状態を使用します。

**複数のアカウントを使い分ける方法：**

1. **Chromeプロファイルを使用**
   - Chromeの「プロファイル」機能で複数のプロファイルを作成
   - 各プロファイルで異なるアカウントにログイン
   - 拡張機能は各プロファイルで独立して動作

2. **シークレットモード**
   - シークレットモードでは拡張機能は動作しません
   - 通常モードで使用してください

### ログイン状態の確認

ログインが完了しているか確認する方法：

1. **各SNSを通常のタブで開く**
   - Facebook: https://www.facebook.com/
   - Threads: https://www.threads.net/
   - X: https://x.com/

2. **ログインしているか確認**
   - ログインしていれば、拡張機能でも使用できます

### トラブルシューティング

#### 問題1: ログイン後も投稿画面が開かない

**解決策：**
1. 「🔄 ログイン状態をリセット」をクリック
2. もう一度ログイン
3. 確認ダイアログで「OK」をクリック
4. 投稿ボタンを再度クリック

#### 問題2: 一括投稿でエラーが出る

**解決策：**
1. 各SNSに個別にログインしているか確認
2. ログインしていない場合、個別にログイン
3. すべてログイン完了後、一括投稿を再試行

#### 問題3: Cookie/ログイン状態が保持されない

**原因：**
- Chromeの設定でCookieが削除されている可能性

**解決策：**
1. Chrome設定 → プライバシーとセキュリティ
2. 「Cookieと他のサイトデータ」を確認
3. 「閉じたときにCookieとサイトデータを削除する」をOFFに

## 🔒 セキュリティとプライバシー

### 保存される情報

拡張機能が保存する情報：

- ✅ ログイン状態のフラグ（true/false）のみ
- ❌ パスワードは保存しません
- ❌ 認証トークンは保存しません
- ❌ 個人情報は保存しません

### Cookie管理

- Cookieは各SNSが管理します
- 拡張機能はChromeブラウザのCookieを使用するだけです
- SNS側でログアウトすれば、Cookieも削除されます

### データの保存場所

ログイン状態のフラグは、Chrome拡張機能のローカルストレージに保存されます：

```javascript
chrome.storage.local
```

- ローカルのみに保存（クラウド同期なし）
- 拡張機能をアンインストールすると削除されます

## 📞 サポート

ログインに関する問題がある場合：

1. まず「🔄 ログイン状態をリセット」を試してください
2. 各SNSに通常のタブでログインできるか確認してください
3. それでも解決しない場合は、GitHubのIssuesで報告してください

---

**バージョン**: 1.2.0  
**最終更新**: 2025年11月18日
